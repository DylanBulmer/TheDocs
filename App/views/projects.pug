extends layout.pug

block links
    link(rel="stylesheet" href="../css/app.css")
    link(rel="stylesheet" href="../css/hljs.css")
    link(rel="stylesheet" href="../css/markdown.css")

block content
    topbar
        img(src="../image/TheDocsLogoWhite.svg" style="height: calc(3em - 16px); position: absolute; top: 8px; left: 32px; cursor: pointer;" onclick="viewPage('c_main')")
        span
            span(style="vertical-align: middle;") Welcome 
                span.fname
                | !
            span(onclick="openNav()")#nav-btn
                i.fa.fa-bars
    nav
        span(onclick="closeNav()")#nav-cls Close 
            span(style="font-size: 1.3em") &times;
        a(onclick="") Home
        a(onclick="") Profile
        a(href="projects.pug") Projects
        a(onclick="") Issues
        a(onclick="logout()" style="position: static; bottom: 0; left: 0;") Logout
    aside
        tabs#dump
        a(class="add-button" onclick="viewPage('c_new')") Start a project!
    content#c_main
        h1 Manage your projects
        br
        p Click on a project on the right to write up an issue or a journal and view it's event log.
        br
        br
        span() Copyright &copy; 2018 Dylan Bulmer
    content#c_doc
        h1(style="width: calc(100% - 20px);").field#d_title
        br
        span.desc(style="width: calc(100% - 20px)") By 
            span#d_name 
            | &nbsp;on 
            span#d_date
        br
        span.desc(style="width: calc(100% - 20px)") This issue was found in 
            span#d_project(style="font-weight: bold;")
        br
        span.desc Description:
        span.field#d_desc
        br
        span.desc Helpful URL:
        span.field#d_url
        br
        span.desc Keywords:
        span.field#d_keywords
        br
        span.desc Solution:
        span.field#d_solution
    content#c_new
        input(style="width: calc(100% - 20px); height: 2em; font-size: 2em; font-weight: bold;" placeholder="New Document" autofocus).field#n_title
        br
        span.desc(style="width: calc(100% - 20px)") By 
            span.fname
            | &nbsp;
            span.lname
            | &nbsp;on 
            span#n_date
        br
        span.desc(style="width: calc(100% - 20px)") This issue was found in 
            span.custom-dropdown
                select(onchange="updateChange()")#n_project
                    option( disabled selected value="-1") Select Project
                    optgroup(label="Projects:")#n_projects
                        option(value="-1" disabled) No Projects Yet
                    optgroup(label="Or:")
                        option(value="new") New Project
            span(style="display: none;")#pname named: 
                input(placeholder="Project Name").new#n_pname
        span.desc Description:
        textarea(rows="2" placeholder="Describe breifly the problem you encountered.").field#n_desc
        br
        span.desc Helpful URL:
        input(placeholder="https://example.com/forum/1234/artical-of-solution").field#n_url
        br
        span.desc Keywords:
        input(placeholder="Please seperate with commas ','").field#n_keywords
        br
        span.desc Solution:
        textarea(rows="15" placeholder="Detailed description of how you solved the problem you encountered. If you supplied a URL, explain how it helped you.").field#n_solution
        span(style="vertical-align: sub;") Use markdown to style your documentation!
        a(onclick="viewPage('c_pre')").p_btn Preview
    content#c_pre
        h1(style="width: calc(100% - 20px);").field#p_title
        br
        span.desc(style="width: calc(100% - 20px)") By 
            span.fname
            | &nbsp;
            span.lname
            | &nbsp;on 
            span#p_date
        br
        span.desc(style="width: calc(100% - 20px)") This issue was found in 
            span#p_project(style="font-weight: bold;")
        br
        span.desc Description:
        span.field#p_desc
        br
        span.desc Helpful URL:
        span.field#p_url
        br
        span.desc Keywords:
        span.field#p_keywords
        br
        span.desc Solution:
        span.field#p_solution
        a(onclick="submitDoc()").p_btn Submit
        a(onclick="viewPage('c_new')").p_btn Back
    script(src="../js/app-functions.js")
    script(src="../js/liveSearch.js")
    script(src="../js/pageViewer.js")
    script(src="../js/submit.js")
    script.
        var user = store.get("user");

        let fnames = document.getElementsByClassName('fname');
        for (i = 0; i < fnames.length; i++) {
            fnames[i].innerText = user.name.first
        }
        let lnames = document.getElementsByClassName('lname');
        for (i = 0; i < lnames.length; i++) {
            lnames[i].innerText = user.name.last
        }